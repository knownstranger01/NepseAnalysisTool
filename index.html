<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEPSE Stock Analyzer</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Chart.js for technical analysis charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- TradingView lightweight charts as an alternative -->
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body class="light-theme">
    <div class="app-container">
        <header>
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>NEPSE Stock Analyzer</h1>
            </div>
            <div class="header-controls">
                <button id="theme-toggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="refresh-data" class="refresh-btn">
                    <i class="fas fa-sync-alt"></i> Update Data
                </button>
            </div>
        </header>

        <div class="main-content">
            <div class="sidebar">
                <div class="search-container">
                    <input type="text" id="stock-search" placeholder="Search stocks...">
                    <i class="fas fa-search search-icon"></i>
                </div>
                <div class="stock-list-container">
                    <h3>NEPSE Stocks</h3>
                    <div class="stock-list" id="stock-list">
                        <!-- Stock list will be populated here -->
                        <div class="loading-indicator">
                            <i class="fas fa-spinner fa-spin"></i> Loading stocks...
                        </div>
                    </div>
                </div>
                <div class="data-status">
                    <span id="last-updated">Last updated: Never</span>
                </div>
            </div>

            <div class="content">
                <div class="stock-details-container" id="stock-details">
                    <div class="welcome-message">
                        <h2>Welcome to NEPSE Stock Analyzer</h2>
                        <p>Select a stock from the list to view detailed analysis</p>
                        <div class="features">
                            <div class="feature">
                                <i class="fas fa-chart-bar"></i>
                                <h3>Technical Indicators</h3>
                                <p>RSI, MACD, Moving Averages</p>
                            </div>
                            <div class="feature">
                                <i class="fas fa-signal"></i>
                                <h3>Trend Analysis</h3>
                                <p>Price trends and patterns</p>
                            </div>
                            <div class="feature">
                                <i class="fas fa-lightbulb"></i>
                                <h3>Recommendations</h3>
                                <p>Buy/Sell signals based on analysis</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stock-analysis hidden" id="stock-analysis">
                    <div class="stock-header">
                        <div class="stock-title">
                            <h2 id="stock-name">Stock Name</h2>
                            <span id="stock-symbol">SYMBOL</span>
                        </div>
                        <div class="stock-price">
                            <span id="current-price">0.00</span>
                            <span id="price-change" class="price-up">+0.00 (0.00%)</span>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-controls">
                            <div class="chart-period">
                                <button class="period-btn active" data-period="1M">1M</button>
                                <button class="period-btn" data-period="3M">3M</button>
                                <button class="period-btn" data-period="6M">6M</button>
                                <button class="period-btn" data-period="1Y">1Y</button>
                                <button class="period-btn" data-period="MAX">MAX</button>
                            </div>
                            <div class="chart-type">
                                <button class="chart-type-btn active" data-type="candle">
                                    <i class="fas fa-chart-line"></i>
                                </button>
                                <button class="chart-type-btn" data-type="line">
                                    <i class="fas fa-chart-area"></i>
                                </button>
                            </div>
                        </div>
                        <div id="price-chart" class="price-chart"></div>
                    </div>

                    <div class="indicators-container">
                        <div class="indicator-tabs">
                            <button class="tab-btn active" data-tab="overview">Overview</button>
                            <button class="tab-btn" data-tab="technical">Technical</button>
                            <button class="tab-btn" data-tab="fundamental">Fundamental</button>
                        </div>
                        
                        <div class="tab-content">
                            <div id="overview-tab" class="tab-pane active">
                                <div class="recommendation-card">
                                    <h3>Recommendation</h3>
                                    <div class="recommendation" id="recommendation">
                                        <div class="recommendation-value">NEUTRAL</div>
                                        <div class="recommendation-meter">
                                            <div class="meter-bar">
                                                <div class="meter-fill" style="width: 50%;"></div>
                                            </div>
                                            <div class="meter-labels">
                                                <span>Strong Sell</span>
                                                <span>Sell</span>
                                                <span>Neutral</span>
                                                <span>Buy</span>
                                                <span>Strong Buy</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="overview-grid">
                                    <div class="overview-item">
                                        <span class="item-label">Open</span>
                                        <span class="item-value" id="open-price">0.00</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">High</span>
                                        <span class="item-value" id="high-price">0.00</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">Low</span>
                                        <span class="item-value" id="low-price">0.00</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">Close</span>
                                        <span class="item-value" id="close-price">0.00</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">Volume</span>
                                        <span class="item-value" id="volume">0</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">52W High</span>
                                        <span class="item-value" id="52w-high">0.00</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">52W Low</span>
                                        <span class="item-value" id="52w-low">0.00</span>
                                    </div>
                                    <div class="overview-item">
                                        <span class="item-label">Market Cap</span>
                                        <span class="item-value" id="market-cap">0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="technical-tab" class="tab-pane">
                                <div class="indicators-grid">
                                    <div class="indicator-card">
                                        <h3>RSI (14)</h3>
                                        <div class="indicator-value" id="rsi-value">0.00</div>
                                        <div class="indicator-chart" id="rsi-chart"></div>
                                        <div class="indicator-interpretation" id="rsi-interpretation">Neutral</div>
                                    </div>
                                    <div class="indicator-card">
                                        <h3>MACD</h3>
                                        <div class="indicator-value" id="macd-value">0.00</div>
                                        <div class="indicator-chart" id="macd-chart"></div>
                                        <div class="indicator-interpretation" id="macd-interpretation">Neutral</div>
                                    </div>
                                    <div class="indicator-card">
                                        <h3>Moving Averages</h3>
                                        <div class="ma-container">
                                            <div class="ma-item">
                                                <span class="ma-label">MA (20)</span>
                                                <span class="ma-value" id="ma20-value">0.00</span>
                                            </div>
                                            <div class="ma-item">
                                                <span class="ma-label">MA (50)</span>
                                                <span class="ma-value" id="ma50-value">0.00</span>
                                            </div>
                                            <div class="ma-item">
                                                <span class="ma-label">MA (200)</span>
                                                <span class="ma-value" id="ma200-value">0.00</span>
                                            </div>
                                        </div>
                                        <div class="indicator-interpretation" id="ma-interpretation">Neutral</div>
                                    </div>
                                    <div class="indicator-card">
                                        <h3>Bollinger Bands</h3>
                                        <div class="bb-container">
                                            <div class="bb-item">
                                                <span class="bb-label">Upper</span>
                                                <span class="bb-value" id="bb-upper">0.00</span>
                                            </div>
                                            <div class="bb-item">
                                                <span class="bb-label">Middle</span>
                                                <span class="bb-value" id="bb-middle">0.00</span>
                                            </div>
                                            <div class="bb-item">
                                                <span class="bb-label">Lower</span>
                                                <span class="bb-value" id="bb-lower">0.00</span>
                                            </div>
                                        </div>
                                        <div class="indicator-interpretation" id="bb-interpretation">Neutral</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="fundamental-tab" class="tab-pane">
                                <div class="fundamental-grid">
                                    <div class="fundamental-card">
                                        <h3>Company Info</h3>
                                        <div class="company-info" id="company-info">
                                            <div class="info-item">
                                                <span class="info-label">Sector</span>
                                                <span class="info-value" id="sector">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Industry</span>
                                                <span class="info-value" id="industry">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Listed Shares</span>
                                                <span class="info-value" id="listed-shares">-</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label">Market Lot</span>
                                                <span class="info-value" id="market-lot">-</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="fundamental-card">
                                        <h3>Financial Ratios</h3>
                                        <div class="financial-ratios" id="financial-ratios">
                                            <div class="ratio-item">
                                                <span class="ratio-label">EPS</span>
                                                <span class="ratio-value" id="eps">-</span>
                                            </div>
                                            <div class="ratio-item">
                                                <span class="ratio-label">P/E Ratio</span>
                                                <span class="ratio-value" id="pe-ratio">-</span>
                                            </div>
                                            <div class="ratio-item">
                                                <span class="ratio-label">Book Value</span>
                                                <span class="ratio-value" id="book-value">-</span>
                                            </div>
                                            <div class="ratio-item">
                                                <span class="ratio-label">P/B Ratio</span>
                                                <span class="ratio-value" id="pb-ratio">-</span>
                                            </div>
                                            <div class="ratio-item">
                                                <span class="ratio-label">Dividend Yield</span>
                                                <span class="ratio-value" id="dividend-yield">-</span>
                                            </div>
                                            <div class="ratio-item">
                                                <span class="ratio-label">ROE</span>
                                                <span class="ratio-value" id="roe">-</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>NEPSE Stock Analyzer &copy; 2023 | Data from Nepal Stock Exchange</p>
            <p class="disclaimer">Disclaimer: This tool is for informational purposes only. Not financial advice.</p>
        </footer>
    </div>

    <!-- Modal for data update -->
    <div class="modal" id="update-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Updating Data</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="update-progress"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Fetching stock list...</div>
                </div>
                <div class="update-log" id="update-log">
                    <!-- Update logs will be shown here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-update" class="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/db.js"></script>
    <script src="js/api.js"></script>
    <script src="js/indicators.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 